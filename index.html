<!DOCTYPE html>
<html lang="fr">
<head>
    <div id="pricing-modal" class="modal" style="display:none; position:fixed; z-index:10000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.9); justify-content:center; align-items:center;">
    <div style="background:#1a1a24; padding:30px; border-radius:20px; border:2px solid var(--accent); text-align:center; max-width:400px;">
        <h2 style="color:var(--accent);">Passe au niveau PRO ! üöÄ</h2>
        <p>Tu as termin√© les niveaux gratuits. D√©bloque le piano USB et +50 cours pour continuer ta progression.</p>
        <div style="font-size:24px; font-weight:bold; margin:20px 0;">9,90‚Ç¨ <span style="font-size:14px; color:#888;">/ mois</span></div>
        <button onclick="isPro=true; closePricing(); switchTab('cours');" style="background:var(--accent); color:black; border:none; padding:15px 30px; border-radius:10px; font-weight:bold; cursor:pointer; width:100%;">D√©bloquer maintenant</button>
        <button onclick="closePricing()" style="background:transparent; color:#888; border:none; margin-top:15px; cursor:pointer;">Plus tard</button>
    </div>
</div>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>PianoKid Evo Pro</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.png">
</head>
<body>

    <div id="main-menu">
        <div class="profile-bar">
            <div class="profile-left">
                <button onclick="openProfileModal()" class="profile-trigger">
                    üë§ <span id="display-username">Apprenti</span>
                </button>
                <button onclick="toggleColorMode()" id="color-mode-btn">üé® Debutant</button>
                <button onclick="toggleFullScreen()" id="fs-btn">üñ•Ô∏è</button>
            </div>
            <button id="mic-toggle">üé§ Micro OFF</button>
        </div>

        <div class="logo">PianoKid Evo</div>
        
        <div class="nav-tabs">
            <button class="tab-btn active" onclick="switchTab('cours')">COURS</button>
            <button class="tab-btn" onclick="switchTab('exercices')">EXERCICES</button>
            <button class="tab-btn" onclick="switchTab('apprentissage')">APPRENTISSAGE</button>
            <button class="tab-btn" onclick="switchTab('musique')">MUSIQUES</button>
        </div>

        <div id="content-grid" class="grid"></div>
    </div>

    <div id="game-container" style="display:none;">
        <div id="progress-container"><div id="progress-inner"></div></div>
        <button class="btn-close" onclick="quitGame()">‚ùå QUITTER</button>
        <div class="speed-controls">
    <button onclick="setSpeed(2)">Lentüê¢</button>
    <button onclick="setSpeed(4)">Normalüö∂</button>
    <button onclick="setSpeed(7)">Rapide‚ö°</button>
</div>
        <div id="game-layout">
            <div class="finger-guide-side left">
                <div class="hand-flat left-hand">
                    <div class="finger-flat pinky" data-f="5">5</div>
                    <div class="finger-flat ring" data-f="4">4</div>
                    <div class="finger-flat middle" data-f="3">3</div>
                    <div class="finger-flat index" data-f="2">2</div>
                    <div class="finger-flat thumb" data-f="1">1</div>
                    <div class="palm-flat"></div>
                </div>
            </div><div id="fall-zone">
   <div id="hit-line"></div>
</div>

            <div class="finger-guide-side right">
                <div class="hand-flat right-hand">
                    <div class="finger-flat thumb" data-f="1">1</div>
                    <div class="finger-flat index" data-f="2">2</div>
                    <div class="finger-flat middle" data-f="3">3</div>
                    <div class="finger-flat ring" data-f="4">4</div>
                    <div class="finger-flat pinky" data-f="5">5</div>
                    <div class="palm-flat"></div>
                </div>
            </div>
        </div>

        <div id="piano-container">
            <div id="piano"></div>
        </div>
    </div>

    <div id="profile-modal" class="modal">
        <div class="modal-content">
            <h3>Mes Profils</h3>
            <div id="profiles-list"></div>
            <div class="add-profile-box" style="display: flex; flex-direction: column; gap: 15px; margin-top: 20px;">
    <input type="text" id="input-username" placeholder="Ton pr√©nom..." style="width: 100%; box-sizing: border-box;">
    
    <div style="font-size: 0.9rem; color: #888; margin-bottom: -5px;">Choisis ton ic√¥ne :</div>
    <div id="emoji-picker">
        </div>
<div style="font-size: 0.9rem; color: #888; margin-bottom: 5px;">Type de profil :</div>
<div style="display: flex; gap: 10px; margin: 15px 0;">
    <button id="role-enfant" class="role-btn tab-btn active" onclick="setRole('enfant')">üßí Enfant</button>
    <button id="role-adulte" class="role-btn tab-btn" onclick="setRole('adulte')">üë§ Adulte</button>
</div>
<button onclick="createNewProfile()" class="tab-btn active" style="width: 100%; background: var(--accent); color: #000; font-weight: bold;">
    ‚ú® CR√âER LE PROFIL
</button>
</div>
            <button onclick="closeProfileModal()" class="tab-btn" style="width: 100%; margin-top: 10px; border-color: #ff4b2b; color: #ff4b2b; background: rgba(255, 75, 43, 0.1);">
    ‚ùå ANNULER
</button>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js')
        .then(reg => console.log('Service Worker enregistr√© !'))
        .catch(err => console.log('Erreur SW:', err));
    });
  }
</script>
</body>
</html>
